# 正则表达式

## 创建

``` javascript
var re = /ab+c/;

var re = new RegExp("ab+c");
```

## 编写模式

* 简单模式：/abc/
* 使用特殊字符：/ab*c/

### 边界

| 特殊字符 | 含义 |
|:-----|:-----|
| ^ | 匹配 输入的开始 |
| $ | 匹配 输入的结束 |
| \b | 匹配 一个词的边界 |
| \B | 匹配 一个非单词边界 |

### 量词

| 特殊字符 | 含义 |
|:-----|:-----|
| * | 匹配 前一个表达式0次或多次, 等价于{n,} |
| + | 匹配 前一个表达式1次或多次, 等价于{1,} |
| ? | 匹配 前一个表达式0次或1次, 等价于{0,1} <br><br> 如果**紧跟在任何量词 \*、 +、? 或 {} 的后面**，将会使量词变为**非贪婪**（匹配尽量少的字符），如'123abc'使用/\d+/匹配到'123'，使用/\d+?/只匹配到'1' |
| {n} | n 是一个正整数，如1，2，……，匹配前面一个字符刚好出现了 n 次 |
| {n,} | n 是一个正整数，匹配前面一个字符至少出现了 n 次 |
| {n,m} | n 和 m 都是整数，匹配前面的字符至少n次，最多m次。如果 n 或者 m 的值是0， 这个值被忽略。 |

### 断言

表示一个匹配在某些条件下发生。断言包含先行断言、后行断言和条件表达式。

| 特殊字符 | 含义 |
|:-----|:-----|
| x(?=y) | **先行断言**：匹配'x'仅仅当'x'后面跟着'y' |
| (?<=y)x | **后行断言**：匹配'x'仅仅当'x'前面是'y' |
| (x(?!y)) | **正向否定查找**：匹配'x'仅仅当'x'后面不跟着'y' |
| (?<!y)x | **反向否定查找**：匹配'x'仅仅当'x'前面不是'y' |

### 字符类别

| 特殊字符 | 含义 |
|:-----|:-----|
| \ | 非特殊字符之前的\，表示下一个字符是特殊字符；如\b表示‘字符边界’ <br><br> 特殊字符之前的\，表示下一个字符不是特殊字符；<br><br> 字符串字面量中\是转义字符，若要正常显示\，需转义它成为普通字符
| . | 匹配 除换行符之外的任何单个字符 |
| \d | 匹配 一个数字，等价于[0-9] |
| \ D| 匹配 一个非数字字符，等价于[^0-9] |
| \w | 匹配一个单字字符（字母、数字或者下划线），等价于 [A-Za-z0-9_] |
| \W | 匹配一个非单字字符，等价于 [^A-Za-z0-9_] |
| \s | 匹配一个空白字符，包括空格、制表符、换页符和换行符。 |
| \S | 匹配一个非空白字符 |
| \t | 匹配一个水平制表符 |
| \v | 匹配一个垂直制表符 |
| \r | 匹配 一个回车符 |
| \n | 匹配 一个换行符 |
| \f | 匹配 一个换页符 |
| [\b] | 匹配 一个退格 |
| \0 | 匹配 NULL字符， 不要在这后面跟其它小数 |
| \cX | 当X是处于A到Z之间的字符的时候，匹配字符串中的一个控制符 |
| \xhh | 与代码 hh 匹配字符（两个十六进制数字） |
| \uhhh | 与代码 hhhh 匹配字符（四个十六进制数字） |
| \u{hhhh} <br> \u{hhhhh} | （仅当设置了u标志时）使用 Unicode 值 hhhh 匹配字符（十六进制数字） |

### 组合范围

| 特殊字符 | 含义 |
|:-----|:-----|
| (x) | 匹配 'x' 并且记住匹配项，其中括号被称为*捕获括号* <br><br> 正则表达式的替换环节，则要使用像 $1、$2、...、$n 这样的语法，例如'bar foo'.replace(/(...) (...)/, '$2 $1')。$& 表示整个用于匹配的原字符串 |
| (?:x) | 匹配 'x' 但是不记住匹配项。这种括号叫作*非捕获括号*，使得你能够定义与正则表达式运算符一起使用的子表达式。 |
| x\|y | 匹配 x或者y |
| [xyz] <br> [a-c] | 一个字符集合，匹配方括号中的任意字符，包括转义序列。<br><br> 可以使用破折号（-）来指定一个字符范围。<br><br> 对于点（.）和星号（*）这样的特殊符号在一个字符集中没有特殊的意义 |
| [^xyz] <br> [^a-c] | 一个反向字符集，匹配任何没有包含在方括号中的字符<br><br> 可以使用破折号（-）来指定一个字符范围<br><br> 任何普通字符在这里都是起作用的。 |
| \n | n是正整数，返回最后的第n个子捕获匹配的子字符串(捕获的数目以左括号计数) |
| (?\<Name\>x) |  |

## 使用

* 用于RegExp的exec、test方法；
* 用于String的match、matchAll、replace、search、split方法

| 方法 | 描述 | 匹配成功的返回 | 匹配失败的返回 |
|:-----|:-----|:-----|:-----|
| exec | 查找匹配 | 数组 | null |
| test | 测试是否匹配 | true | false |
| match | 查找匹配 | 数组 | null |
| matchAll | 查找所有匹配 | 迭代器（iterator） |  |
| search | 测试匹配 | 位置索引 | -1 |
| replace | 查找匹配，使用替换字符串替换匹配到的子字符串 | 新字符串 | 原字符串 |
| split | 使用正则表达式或固定字符串分隔一个字符串 | 子字符串数组 | 原字符串数组 |

```javascript
var myRe = /d(b+)d/g;
var myRe = new RegExp("d(b+)d", "g");

var myArray = myRe.exec("cdbbdbsbz");

var myArray = /d(b+)d/g.exec("cdbbdbsbz");
```

匹配成功后将返回一个数组并且更新正则表达式的属性

| 对象 | 属性或索引 | 描述 | 值 |
|:-----|:-----|:-----|:-----|
| myArray |  | 匹配到的字符串和所有被记住的子字符串 | ["dbbd", "bb"] |
|  | index | 在输入的字符串中匹配到的以0开始的索引值 | 1 |
|  | input | 初始字符串 | "cdbbdbsbz" |
|  | [0] | 匹配到的所有字符串（并不是匹配后记住的字符串） | "dbbd" |
| myRe | lastIndex | 下一个匹配的索引值（这个属性只有在使用g参数时可用） | 5 |
|  | source | 模式文本。在正则表达式创建时更新，不执行 |  	"d(b+)d" |

### 使用括号的子字符串匹配

一个正则表达式模式使用括号，将导致相应的子匹配被记住。

使用括号匹配的子字符串的数量是无限的。返回的数组中保存所有被发现的子匹配。

```javascript
var re = /(\w+)\s(\w+)/;
var str = "John Smith";
//脚本使用替代的$ 1,$ 2表示第一个和第二个括号的子字符串匹配
var newstr = str.replace(re, "$2, $1");
console.log(newstr);
```

### 通过标志进行高级搜索

| 标识 | 描述 |
|:-----|:-----|
| g | 全局搜索 |
| i | 不区分大小写搜索 |
| m | 多行搜索 |
| s | 允许 . 匹配换行符 |
| u | 使用unicode码的模式进行匹配 |
| y | 执行“粘性”搜索，匹配从目标字符串的当前位置开始，可以使用y标志 |

#### 语法

```javascript
var re = /pattern/flags;

var re = new RegExp("pattern", "flags");
```